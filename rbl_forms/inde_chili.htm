<html><head>
<title>Form wizard DHTML tool</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link rel="stylesheet" type="text/css" href="css/local.css">
<link rel="stylesheet" type="text/css" href="css/rbl_forms.css">

<link rel="stylesheet" type="text/css" href="css/ui-lightness/jquery-ui-1.7.2.custom.css">

<script type="text/javascript" src="js/rbl_base.js"></script>
<script type="text/javascript" src="js/rbl_form.js"></script>
<script type="text/javascript" src="js/rbl_col.js"></script>
<script type="text/javascript" src="js/rbl_elt.js"></script>
<script type="text/javascript" src="js/rbl_build.js"></script>

<script type="text/javascript" src="js/lib/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="js/lib/jquery-ui-1.7.2.js"></script>
<script type="text/javaScript" src="js/lib/chili/jquery.chili-2.2.js"></script>

</head>
<body>
<div style="height:99%">
<div style="margin-right:auto; margin-left:auto; text-align:center;height:10%;">
<h1>RBL_Forms V1.1.1</h1>
<h2>A new and free form generator...</h2>
</div>
<!-- begin: main content area #main -->
<div id="main" style="height:85%;">

<div id="tabs" style="width:95%; height:90%; margin-left: 2%; top: 40px; z-index:250;">
<ul>
	<li><a href="#tabs-1">Form</a></li>
	<li><a href="#tabs-2">Html source</a></li>
	<li><a href="#tabs-3">Xml source</a></li>
	<li><a href="#tabs-4">Preview</a></li>
	<li><a href="php/liste_html.php?a">File liste</a></li>
</ul>

<div id="tabs-1" style="text-align: left;">
<div id="formBuilderMenu" style="float:left; z-index: 500; margin-left: -10px; margin-right:15px; width: 145px; border:2px solid #D0D0D0; background-color: #f0f0f0;">
	<ul id="rbMenu" class="rb_menu">
		<li id="Label"><img src="img/new_label.png"> Label</li>
		<li id="Image"><img src="img/new_image.png"> Image</li>		
		<li id="Text"><img src="img/new_text.png"> Input Text</li>
		<li id="Password"><img src="img/new_password.png"> Password</li>
		<li id="TextArea"><img src="img/new_textarea.png"> TextArea</li>
		<li id="Radio"><img src="img/new_radio.png"> Radio Button</li>
		<li id="Checkbox"><img src="img/new_checkbox.png"> Checkbox</li>
		<li id="Select"><img src="img/new_select.png"> Drop-Down Menu</li>
		<li id="Liste"><img src="img/new_list.png"> Selectable List</li>
		<li id="File"><img src="img/new_file.png"> File</li>
		<li id="Date"><img src="img/new_date_picker.png"> DatePicker </li>			
		<li id="Button"><img src="img/new_button.png"> Button </li>		
		<li id="Wizard"><img src="img/new_wizard.png"> Panel </li>		
	</ul>
	<hr/>
	<ul id="rbMenu2" class="rb_menu">
		<li id="formElemEdit"><img src="img/property.png"> Edit </li>	
		<li id="formElemDelete"><img src="img/delete.png"> Delete</li>			
	</ul>
	<hr/>
	<ul id="rbMenu3" class="rb_menu">
		<li id="formEdit"><img src="img/property.png"> Edit Form </li>	
		<li id="formAddCol"><img src="img/property.png"> Add Col </li>	
	</ul>
	<hr/>      
	<ul id="rbMenu4" class="rb_menu">
		<li id="loadXml"><img src="img/load_xml.png"> Load</li>
		<li id="saveXml"><img src="img/save_xml.png"> Save</li>	
	</ul>
</div>
<div id="main-f1" style="margin-left:170px;background-color:#f8f8f8;"></div>
</div>
<div id="tabs-2" style="text-align: left;"><pre class="mxml" name="htmsource" id="htmsource"></pre></div>
<div id="tabs-3" style="text-align: left;"><pre class="mxml" name="xmlsource" id="xmlsource"></pre></div>
<div id="tabs-4" style="text-align: left;"><div id="previewdst"></div></div>

</div><!-- fin id tabs -->

<div id="dialog_form" title="Form Definition"></div>
<div id="dialog_col"  title="Column definition"></div>
<div id="dialog_elt"  title="Input zone definition"></div>
<div id="dialog_file" title="Load a form"></div>

</div> <!-- fin : main  area #main -->

<div style="margin-right:auto; margin-left:auto; text-align:center; height:5%; border-top: 1px solid #2020A0;">
&copy; 2009 - Raymond Berthou<br/>
Download and more informations : <a href="http://www.berthou.com/" target="_blank">http://www.berthou.com/</a>
</div>
</div>
<script type="text/javascript">
var selected = null ;

jQuery(document).ready(
 function()
 { 
	ChiliBook.recipeFolder = "js/lib/chili/"; 
	
	jQuery.datepicker.setDefaults(jQuery.extend({showMonthAfterYear: false}, jQuery.datepicker.regional['fr']));
	
	jQuery("#tabs").tabs({
	   select: function(event, ui) { 

	   	if (ui.index == 1) {
		    // htmlStr = jQuery("#tabs-1").html() ;
			htmlStr = build_html() ;
			jQuery("#htmsource").text( htmlStr ) ;
			jQuery("#htmsource").chili();
		}
	   	if (ui.index == 2) {
		    xmlStr  = build_xml_elt() ;
			jQuery("#xmlsource").text( xmlStr ) ;
			jQuery("#xmlsource").chili();
		}
	   	if (ui.index == 3) {
		    xmlStr  = build_html() ;
			jQuery("#previewdst").html( xmlStr ) ;
		}
	   }
	})
	jQuery("#main-f1").resizable(
		{
			stop: function(event, ui) { 
				
				if (rblFormArray[ IDFORM ]) {
					if ( ui.size.width  != ui.originalSize.width)  {
						rblFormArray[ IDFORM ].e_width  = ( ui.size.width - 20 ) + "px" ;
					}
					if ( ui.size.height  != ui.originalSize.height)  {
						rblFormArray[ IDFORM ].e_height = ( ui.size.height - 40  ) + "px";
					}
					rblFormArray[ IDFORM ].drawForm() ;
				}
			}
		}	
	) ;	

	jQuery("#menu_elt").dialog({
		autoOpen: true,
		width: 180,
		position: [0, 128],
		resizable: false,
		modal: false
	 });
		
	jQuery("#dialog_form").dialog({
		bgiframe: true,
		autoOpen: false,
		height: 450,
		modal: true,
		buttons: {
			'Sauver': function() {
				var bValid = true;
				
				if (bValid) {
					saveFormPanel(  ) ;
	
					jQuery(this).dialog('close');
				}
			},
			Cancel: function() {
				jQuery(this).dialog('close');
			}
		},
		close: function() {
			//allFields.val('').removeClass('ui-state-error');
		}
	});

	jQuery("#dialog_file").dialog({
		bgiframe: true,
		autoOpen: false,
		height: 200,
		modal: true,
		buttons: {
			'Ouvrir': function() {
				var bVal = jQuery("#x_file").val();
				
				if (bVal && bVal.length > 0) {
					load_xml( bVal ) ;
					jQuery(this).dialog('close');
				} 
			},
			Cancel: function() {
				jQuery(this).dialog('close');
			}
		},
		close: function() {
			//allFields.val('').removeClass('ui-state-error');
		}
	});	
	jQuery("#dialog_col").dialog({
		bgiframe: true,
		autoOpen: false,
		height: 400,
		modal: true,
		buttons: {
			'Sauver': function() {
				var bValid = true;
				
				if (bValid) {
					saveColPanel( jQuery("#c_id").val() ) ;
	
					jQuery(this).dialog('close');
				}
			},
			Cancel: function() {
				jQuery(this).dialog('close');
			}
		},
		close: function() {
			//allFields.val('').removeClass('ui-state-error');
		}
	});
	
	jQuery("#dialog_elt").dialog({
		bgiframe: true,
		autoOpen: false,
		height: 620,
		width: 480,
		modal: true,
		buttons: {
			'Sauver': function() {
				var bValid = true;
				var _no = jQuery("#e_id").val() ;
				
				if (bValid) {
					saveInputPanel( _no ) ;

					jQuery(this).dialog('close');
				}
			},
			Cancel: function() {
				jQuery(this).dialog('close');
			}
		},
		close: function() {
			//allFields.val('').removeClass('ui-state-error');
		}
	});
	
	jQuery('#formEdit')      .click(function() { showFormPanel()	;});
	jQuery('#formAddCol')    .click(function() { addCol()			;});
	jQuery('#formElemEdit')  .click(function() { showControlPanel()	;});
	jQuery('#formElemDelete').click(function() { deleteElement()   	;});
	jQuery('#loadXml')		 .click(function() { showFilePanel( )	;});
	jQuery('#saveXml')		 .click(function() { save_xml()		 	;});
	
	initDrop() ;
		
	jQuery(".connectedSortable").resizable() ;
		
	enableRowSelectable(".connectedSortable li") ;

	initFormData() ;
	addCol() ;
});
</script>
</body></html>